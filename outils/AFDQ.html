<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4Safe+ - Diagnostic profil attentionnel au Volant</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: 'Inter', sans-serif; background: #f3f4f6; }
.question-card { background: white; padding: 1.5rem; border-radius: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
.tips { background: #fffbeb; border-left: 4px solid #facc15; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; color: #78350f; }
</style>
</head>
<body class="p-6">



<main class="max-w-3xl mx-auto space-y-6">

<div class="tips">
<strong>Principe :</strong> Évaluez vos points faibles et découvrez des stratégies concrètes pour rester attentif sur la route. Les résultats vous aideront à appliquer des stratégies personnalisées pour réduire le risque d’inattention.
</div>

<form id="attentionForm">
  <!-- 5 axes -->
  <div class="question-card">
    <p class="mb-2 font-semibold">1. Avez-vous du mal à rester concentré sur la route ?</p>
    <select name="q1" class="w-full p-2 rounded border">
      <option value="0">Jamais</option>
      <option value="1">Rarement</option>
      <option value="2">Parfois</option>
      <option value="3">Souvent</option>
    </select>
  </div>

  <div class="question-card">
    <p class="mb-2 font-semibold">2. Vos pensées vagabondent fréquemment en conduisant ?</p>
    <select name="q2" class="w-full p-2 rounded border">
      <option value="0">Jamais</option>
      <option value="1">Rarement</option>
      <option value="2">Parfois</option>
      <option value="3">Souvent</option>
    </select>
  </div>

  <div class="question-card">
    <p class="mb-2 font-semibold">3. Vous sentez-vous fatigué ou somnolent au volant ?</p>
    <select name="q3" class="w-full p-2 rounded border">
      <option value="0">Jamais</option>
      <option value="1">Rarement</option>
      <option value="2">Parfois</option>
      <option value="3">Souvent</option>
    </select>
  </div>

  <div class="question-card">
    <p class="mb-2 font-semibold">4. Êtes-vous facilement distrait par l’environnement, les passagers ou le téléphone ?</p>
    <select name="q4" class="w-full p-2 rounded border">
      <option value="0">Jamais</option>
      <option value="1">Rarement</option>
      <option value="2">Parfois</option>
      <option value="3">Souvent</option>
    </select>
  </div>

  <div class="question-card">
    <p class="mb-2 font-semibold">5. Avez-vous des difficultés à estimer la vitesse ou la distance des autres véhicules ?</p>
    <select name="q5" class="w-full p-2 rounded border">
      <option value="0">Jamais</option>
      <option value="1">Rarement</option>
      <option value="2">Parfois</option>
      <option value="3">Souvent</option>
    </select>
  </div>

  <div class="text-center">
    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md transition">Voir mon résultat</button>
  </div>
</form>

<div class="mt-8">
  <canvas id="attentionChart" class="w-full h-64"></canvas>
</div>

<div id="resultText" class="mt-6 text-center text-xl font-semibold text-blue-700"></div>

<div class="mt-6 text-gray-600 text-sm">
<p><strong>Source scientifique :</strong> Adapté de l’<em>Attention Failure During Driving Questionnaire (AFDQ)</em>, Carney, C. et al., 2019, <a href="https://pubmed.ncbi.nlm.nih.gov/30799162/" class="underline text-blue-600" target="_blank">PubMed</a>.</p>
</div>
</main>

<footer class="text-center mt-12 text-gray-500">
<p>Ce test est indicatif et ne remplace pas une évaluation professionnelle.</p>
</footer>

<script>
document.getElementById('attentionForm').addEventListener('submit', function(e){
  e.preventDefault();
  const form = e.target;
  const scores = [
    parseInt(form.q1.value),
    parseInt(form.q2.value),
    parseInt(form.q3.value),
    parseInt(form.q4.value),
    parseInt(form.q5.value)
  ];
  const total = scores.reduce((a,b)=>a+b,0);

  // Radar chart
  const ctx = document.getElementById('attentionChart').getContext('2d');
  if(window.radarChart) window.radarChart.destroy();
  window.radarChart = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['Concentration', 'Distraction mentale', 'Fatigue', 'Distractions externes', 'Jugement de vitesse'],
      datasets: [{
        label: 'Score',
        data: scores,
        backgroundColor: 'rgba(59,130,246,0.2)',
        borderColor: 'rgba(59,130,246,1)',
        pointBackgroundColor: 'rgba(59,130,246,1)',
        pointRadius: 5,
        pointHoverRadius: 7,
      }]
    },
    options: {
      scales: { r: { beginAtZero: true, max: 3, ticks: { stepSize: 1 } } }
    }
  });

  // Conseils personnalisés
  const tips = [
    "Concentration : faire des micro-pauses, exercices de pleine conscience.",
    "Distraction mentale : créer un rituel de conduite, planifier le trajet, petites tâches cognitives en lien avec la conduite.",
    "Fatigue : vérifier le sommeil, faire des pauses régulières.",
    "Distractions externes : réduire téléphone, musique, passagers.",
    "Jugement de vitesse : exercices de perception hors circulation, repères visuels."
  ];

  let message = "<strong>Stratégies adaptées :</strong><ul>";
  scores.forEach((s,i)=>{
    if(s>=2) message += `<li>${tips[i]}</li>`;
  });
  message += "</ul>";

  document.getElementById('resultText').innerHTML = message;
});
</script>

</body>
</html>
