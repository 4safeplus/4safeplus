<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4Safe+ - Diagnostic attentionnel</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plotly.com/plotly-latest.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
  <style>
    body { font-family: 'Inter', sans-serif; }
    .logo-plus { background-color: #28a745; color: white; width: 24px; height: 24px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; margin-left: 2px; }
    .question-card { background: white; padding: 1.5rem; border-radius: 1rem; box-shadow: 0 3px 8px rgba(0,0,0,0.08); }
    .app-card { background:#e0f2fe; border-left:4px solid #3b82f6; padding:1rem; border-radius:0.75rem; cursor:pointer; transition:0.3s; }
    .app-card:hover { background:#bfdbfe; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- Navbar -->
<header class="bg-white shadow-md fixed w-full top-0 z-50">
  <div class="container mx-auto flex flex-col items-center justify-between py-4 px-6 md:flex-row">
    <div class="flex flex-col items-center">
      <h1 class="text-2xl font-bold text-blue-700">4Safe<span class="logo-plus">+</span></h1>
      <p class="text-gray-700 italic text-sm mt-0.5">La sécurité au travail, sur la route et à la maison</p>
    </div>
    <nav class="flex items-center space-x-4 mt-2 md:mt-0">
      <a href="../index.html" class="hover:text-blue-600">Accueil</a>
      <a href="../articles.html" class="hover:text-blue-600">Articles</a>
      <a href="../outils.html" class="hover:text-blue-600">Outils</a>
      <a href="../rd.html" class="hover:text-blue-600">R&D</a>
      <a href="../services.html" class="hover:text-blue-600">Services</a>
      <a href="../contact.html" class="hover:text-blue-600">Contact</a>
    </nav>
  </div>
</header>

<!-- Contenu -->
<main class="mt-28 container mx-auto px-6 max-w-3xl">
  <section class="bg-white rounded-xl shadow-lg p-8">
    <h2 class="text-3xl font-bold text-blue-700 mb-4">Diagnostic attentionnel du conducteur</h2>
    <p class="text-gray-600 mb-6">Ce test inspiré de l’<em>Attention Failure During Driving Questionnaire (AFDQ)</em> [Smilek et al., 2010] vous permet d’identifier vos fragilités principales (fatigue, distraction, concentration, jugement de vitesse) et de recevoir une stratégie personnalisée.</p>

    <!-- FORM -->
    <form id="attentionForm" class="space-y-6">
      <div class="question-card">
        <p class="mb-2 font-semibold">1. Vous arrive-t-il d’être fatigué(e) avant de prendre le volant ?</p>
        <select name="fatigue" class="w-full p-2 rounded border">
          <option value="0">Jamais</option><option value="1">Rarement</option><option value="2">Parfois</option><option value="3">Souvent</option>
        </select>
      </div>
      <div class="question-card">
        <p class="mb-2 font-semibold">2. Votre esprit vagabonde-t-il souvent en conduisant (pensées personnelles, travail, etc.) ?</p>
        <select name="distraction_mentale" class="w-full p-2 rounded border">
          <option value="0">Jamais</option><option value="1">Rarement</option><option value="2">Parfois</option><option value="3">Souvent</option>
        </select>
      </div>
      <div class="question-card">
        <p class="mb-2 font-semibold">3. Êtes-vous facilement distrait(e) par votre environnement (panneaux, passagers, musique) ?</p>
        <select name="distraction_externe" class="w-full p-2 rounded border">
          <option value="0">Jamais</option><option value="1">Rarement</option><option value="2">Parfois</option><option value="3">Souvent</option>
        </select>
      </div>
      <div class="question-card">
        <p class="mb-2 font-semibold">4. Vous arrive-t-il de mal juger la vitesse ou la distance d’autres véhicules ?</p>
        <select name="jugement" class="w-full p-2 rounded border">
          <option value="0">Jamais</option><option value="1">Rarement</option><option value="2">Parfois</option><option value="3">Souvent</option>
        </select>
      </div>
      <div class="question-card">
        <p class="mb-2 font-semibold">5. Avez-vous du mal à rester concentré(e) sur une longue durée au volant ?</p>
        <select name="concentration" class="w-full p-2 rounded border">
          <option value="0">Jamais</option><option value="1">Rarement</option><option value="2">Parfois</option><option value="3">Souvent</option>
        </select>
      </div>

      <div class="text-center">
        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded-lg shadow-md transition">Voir mon résultat</button>
      </div>
    </form>

    <!-- Résultats -->
    <div id="resultBox" class="mt-10 hidden">
      <div id="result3D" class="h-80 mb-6"></div>
      <div id="resultText" class="text-lg font-semibold text-blue-700 text-center mb-6"></div>
      <div id="appBox" class="app-card text-center">
        <p class="font-semibold">Appliquez votre stratégie personnalisée avec l’app 4Safe<span class="logo-plus">+</span> :</p>
        <div class="flex justify-center gap-4 mt-2">
          <a href="https://play.google.com/store" target="_blank"><img src="../images/googleplay.png" alt="Google Play" class="h-10"></a>
          <a href="https://www.apple.com/app-store/" target="_blank"><img src="../images/appstore.png" alt="App Store" class="h-10"></a>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Footer -->
<footer class="bg-blue-900 text-white py-10 text-center mt-12">
  <p>&copy; 2025 4Safe+ - Tous droits réservés.</p>
  <div class="flex justify-center mt-4 space-x-6">
    <a href="https://www.tiktok.com" target="_blank" class="hover:text-green-400 text-2xl"><i class="fab fa-tiktok"></i></a>
    <a href="https://www.linkedin.com" target="_blank" class="hover:text-green-400 text-2xl"><i class="fab fa-linkedin"></i></a>
    <a href="https://www.instagram.com" target="_blank" class="hover:text-green-400 text-2xl"><i class="fab fa-instagram"></i></a>
  </div>
</footer>

<script>
document.getElementById('attentionForm').addEventListener('submit', function(e){
  e.preventDefault();

  // Récupération des scores
  const form = e.target;
  const scores = {
    "Fatigue": parseInt(form.fatigue.value),
    "Distraction mentale": parseInt(form.distraction_mentale.value),
    "Distraction externe": parseInt(form.distraction_externe.value),
    "Jugement vitesse": parseInt(form.jugement.value),
    "Concentration": parseInt(form.concentration.value)
  };

  const strategies = {
    "Fatigue": "Évaluez votre niveau de fatigue avant la route et utilisez l’app pour programmer des pauses régulières.",
    "Distraction mentale": "Pratiquez des exercices de pleine conscience et utilisez l’app pour des rappels d’ancrage.",
    "Distraction externe": "Réduisez au maximum les distractions (mode conduite activé sur téléphone, volume réduit).",
    "Jugement vitesse": "Travaillez votre estimation des vitesses avec des exercices visuels proposés dans l’app.",
    "Concentration": "Faites des micro-pauses attentionnelles et testez vos réflexes via l’app avant vos trajets."
  };

  const maxKey = Object.keys(scores).reduce((a,b) => scores[a] > scores[b] ? a : b);

  // Graphique 3D simplifié (barres)
  const trace = {
    x: Object.keys(scores),
    y: Object.values(scores),
    type: 'bar',
    marker: {color: 'rgba(59,130,246,0.8)'}
  };
  Plotly.newPlot('result3D', [trace], {margin:{t:20}, yaxis:{range:[0,3]}}, {displayModeBar:false});

  // Texte résultat
  document.getElementById('resultText').innerHTML =
    `Votre fragilité principale est : <strong>${maxKey}</strong><br>${strategies[maxKey]}`;

  document.getElementById('resultBox').classList.remove('hidden');
});
</script>
</body>
</html>
